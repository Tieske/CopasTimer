<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Luadocs for copas/eventer.lua</title>
    <link rel="stylesheet" href="../../luadoc.css" type="text/css" />
    <!--meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/-->
</head>

<body>
<div id="container">

<div id="product">
    <div id="product_logo"></div>
    <div id="product_name"><big><b></b></big></div>
    <div id="product_description"></div>
</div> <!-- id="product" -->

<div id="main">

<div id="navigation">


<h2>LuaDoc</h2>
<ul>
	
	<li><a href="../../index.html">Index</a></li>
	
</ul>


<!-- Module list -->



<!-- File list -->

<h2>Files</h2>
<ul>

	<li><strong>copas/eventer.lua</strong></li>
	
	<li>
		<a href="../../files/copas/timer.html">copas/timer.lua</a>
	</li>

</ul>






</div> <!-- id="navigation" -->

<div id="content">

<h1>File "<code>copas/eventer.lua</code>"</h1>


<p>The eventer is an event dispatcher. It works on top of Copas Timer using the workers to create event handlers. The eventer uses a publish/subscribe mechanism with servers and clients. The servers should register before firing any events, and the clients should subscribe to server events.<br/>&nbsp;<br/>Dispatching pushes event data in the worker queues of the eventhandlers. This means that one or more workers have been scheduled to each handle one or more enqueued events, but they will not be executed when an event is dispatched. Execution follows later when the Copas Timer loop continues to handle its worker queues in the background. The eventer will create a global table; <code>copas.eventer</code>, but that should generally not be used except for the <code>copas.eventer.decorate()</code> method which will provide an object/table with event capabilities.<br/>&nbsp;<br/>This module is part of Copas Timer and is free software under the MIT/X11 license.</p>



<p>Copyright &copy; 2011-2013 Thijs Schreijer</p>


<p><small><b>Release:</b> Version 1.0, Timer module to extend Copas with a timer and worker capability</small></p>



<h2>Tables</h2>
<table class="table_list">

	<tr>
	<td class="name" nowrap><a href="#copas.eventer.events">copas.eventer.events</a></td>
	<td class="summary">Event list for eventer (events generated by it).</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#copas.events">copas.events</a></td>
	<td class="summary">Event list for Copas itself.</td>
	</tr>

</table>



<h2>Functions</h2>
<table class="function_list">

    <tr>
    <td class="name" nowrap><a href="#clientsubscribe">clientsubscribe</a>&nbsp;(client, server, handler, event)</td>
    <td class="summary">subscribes a client to events.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#clientunsubscribe">clientunsubscribe</a>&nbsp;(client, server, event)</td>
    <td class="summary">unsubscribes a client from events.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#decorate">decorate</a>&nbsp;(server, events)</td>
    <td class="summary">Decorates an object as an event server.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#event.cancel">event.cancel</a>&nbsp;(self)</td>
    <td class="summary">Cancels all event related queueitems from the copas background worker queues.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#event.event">event.event</a>&nbsp;()</td>
    <td class="summary">The event string.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#event.finish">event.finish</a>&nbsp;(self, timeout)</td>
    <td class="summary">Waits for an event to be completed in a blocking mode.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#event.queueitems">event.queueitems</a>&nbsp;()</td>
    <td class="summary">Table/list with queueitems created.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#event.waitfor">event.waitfor</a>&nbsp;(self, timeout)</td>
    <td class="summary">Waits for an event to be completed.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#getclients">getclients</a>&nbsp;(server)</td>
    <td class="summary">Gets a list of clients of a particular server.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#getsubscriptions">getsubscriptions</a>&nbsp;(client)</td>
    <td class="summary">Gets a list of subscriptions of a particular client.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#server.dispatch">server.dispatch</a>&nbsp;(self, event, ...)</td>
    <td class="summary">Dispatches an event for this server.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#server.events">server.events</a>&nbsp;()</td>
    <td class="summary">Table (as a set) with the event strings for this server.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#server.subscribe">server.subscribe</a>&nbsp;(self, client, handler, event)</td>
    <td class="summary">Subscribes a client to the events of this server.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#server.unsubscribe">server.unsubscribe</a>&nbsp;(self, client, event)</td>
    <td class="summary">Unsubscribes a client from the events of this server.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#serverdispatch">serverdispatch</a>&nbsp;(server, event, ...)</td>
    <td class="summary">dispatches an event from a server.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#serverregister">serverregister</a>&nbsp;(server, eventlist)</td>
    <td class="summary">registers a server that will fire events.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#serverunregister">serverunregister</a>&nbsp;(server)</td>
    <td class="summary">unregisters a server that will no longer fire events </td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#seterrorhandler">seterrorhandler</a>&nbsp;(handler)</td>
    <td class="summary">Sets the error handler function to be used when calling eventhandlers.</td>
    </tr>

</table>


<br/>
<br/>


<h2><a name="tables"></a>Tables</h2>
<dl class="table">

<dt><a name="copas.eventer.events"></a><strong>copas.eventer.events</strong></dt>
<dd>Event list for eventer (events generated by it).


<h3>Fields</h3>
<ul>
	
	<li>
	  <code><em>register</em></code>: Fired whenever a new server registers events (note: 'copas' and 'copas.eventer' will have been registered before any client had a chance to subscribe, so these subscriptions cannot be caught by using this event)
	</li>
	
	<li>
	  <code><em>unregister</em></code>: Fired whenever a server unregisters its events
	</li>
	
	<li>
	  <code><em>subscribe</em></code>: Fired whenever a client subscribes to events
	</li>
	
	<li>
	  <code><em>unsubscribe</em></code>: Fired whenever a client unsubscribes from events
	</li>
	
</ul>







</dd>


<dt><a name="copas.events"></a><strong>copas.events</strong></dt>
<dd>Event list for Copas itself. The event structure for Copas will only be initialized when the eventer is used.


<h3>Fields</h3>
<ul>
	
	<li>
	  <code><em>loopstarting</em></code>: Fired <strong>before</strong> the copas loop starts. It will immediately be finished (see <code>event.finish()</code>). So while the event threads run there will be no timers, sockets, nor workers running. Only the threads created for the 'loopstarting' event will run.
	</li>
	
	<li>
	  <code><em>loopstarted</em></code>: Fired when the Copas loop has started, by now timers, sockets and workers are running.
	</li>
	
	<li>
	  <code><em>loopstopping</em></code>: Fired when the Copas loop starts exiting. For as long as not all event threads (for this specific event) have finished, the timers, sockets and workers will keep running.
	</li>
	
	<li>
	  <code><em>loopstopped</em></code>: Fired <strong>after</strong> the Copas loop has finished, this event will immediately be finished (see <code>event.finish()</code>), so the timers, sockets and workers no longer run.
	</li>
	
</ul>





<div>

<h3>See also:</h3>
<ul>
	
	<li><a href="files/copas/eventer.html#event.finish">
		event.finish
	</a></li>
	
</ul>

</div>



</dd>


</dl>



<h2><a name="functions"></a>Functions</h2>
<dl class="function">



<dt><a name="clientsubscribe"></a><strong>clientsubscribe</strong>&nbsp;(client, server, handler, event)</dt>
<dd>
subscribes a client to events. The prefered way is to use the <code>decorate()</code> function and then call <code>subscribe()</code>


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>client</em></code>: unique client parameter (self)
	</li>
	
	<li>
	  <code><em>server</em></code>: a unique key to identify the specific server
	</li>
	
	<li>
	  <code><em>handler</em></code>: event handler function to be called. It will be called with signature <code>handler(client, server, event, [additional event parameters...])</code> or in method notation; <code>client:handler(server, event, [additional event parameters...])</code>.
	</li>
	
	<li>
	  <code><em>event</em></code>: string, <code>nil</code> to subscribe to all events
	</li>
	
</ul>










<div>

<h3>See also:</h3>
<ul>
	
	<li><a href="../../files/copas/eventer.html#decorate">
		decorate
	</a></li>
	
	<li><a href="../../files/copas/eventer.html#server.subscribe">
		server.subscribe
	</a></li>
	
</ul>

</div>


</dd>




<dt><a name="clientunsubscribe"></a><strong>clientunsubscribe</strong>&nbsp;(client, server, event)</dt>
<dd>
unsubscribes a client from events. The prefered way is to use the <code>decorate()</code> function and then call <code>unsubscribe()</code>


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>client</em></code>: unique client parameter (self)
	</li>
	
	<li>
	  <code><em>server</em></code>: a unique key to identify the specific server, <nil>nil</nil> to unsubscribe all
	</li>
	
	<li>
	  <code><em>event</em></code>: string, <code>nil</code> to unsubscribe from all events
	</li>
	
</ul>










<div>

<h3>See also:</h3>
<ul>
	
	<li><a href="../../files/copas/eventer.html#decorate">
		decorate
	</a></li>
	
	<li><a href="../../files/copas/eventer.html#server.unsubscribe">
		server.unsubscribe
	</a></li>
	
</ul>

</div>


</dd>




<dt><a name="decorate"></a><strong>decorate</strong>&nbsp;(server, events)</dt>
<dd>
Decorates an object as an event server. It will provide the object with the following methods/tables; <ul> <li><code>server:subscribe(client, handler, event)</code></li> <li><code>server:unsubscribe(client, event)</code></li> <li><code>server:dispatch(event, ...)</code></li> <li><code>server.events</code></li> </ul>Additionally it will register the object as event server. The methods are shortcuts to the <code>eventer</code> methods <code>clientsubscribe, clientunsubscribe, serverdispatch</code>.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>server</em></code>: The event server object that will be decorated with the methods and tables listed above.
	</li>
	
	<li>
	  <code><em>events</em></code>: A list of event strings. This list will be copied to a new table (as a set) and stored in <code>server.events</code>
	</li>
	
</ul>










<div>

<h3>See also:</h3>
<ul>
	
	<li><a href="../../files/copas/eventer.html#clientsubscribe">
		clientsubscribe
	</a></li>
	
	<li><a href="../../files/copas/eventer.html#clientunsubscribe">
		clientunsubscribe
	</a></li>
	
	<li><a href="../../files/copas/eventer.html#serverdispatch">
		serverdispatch
	</a></li>
	
</ul>

</div>


</dd>




<dt><a name="event.cancel"></a><strong>event.cancel</strong>&nbsp;(self)</dt>
<dd>
Cancels all event related queueitems from the copas background worker queues. Queueitems will remain in the event object itself, but will be flagged as cancelled.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>self</em></code>: the event table
	</li>
	
</ul>











</dd>




<dt><a name="event.event"></a><strong>event.event</strong>&nbsp;()</dt>
<dd>
The event string. (this is a field, not a function)











<div>

<h3>See also:</h3>
<ul>
	
	<li><a href="../../files/copas/eventer.html#server.events">
		server.events
	</a></li>
	
</ul>

</div>


</dd>




<dt><a name="event.finish"></a><strong>event.finish</strong>&nbsp;(self, timeout)</dt>
<dd>
Waits for an event to be completed in a blocking mode. That is; all event queueitems have been completed by the workers (this does not include additional events spawned from them). Current thread will NOT yield while waiting, it will only process the event related queueitems. It is blocking, so timers, sockets and workers will not run in the mean time, so executing this method may take a long time so use carefully!<br/>&nbsp;If it should not block, then use <code>waitfor()</code>.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>self</em></code>: the event table
	</li>
	
	<li>
	  <code><em>timeout</em></code>: timeout (in seconds), use <code>nil</code> for no timeout
	</li>
	
</ul>





<div>


<h3 class="inline-block">Return value:</h3>
<code>true</code> when completed, or <code>nil, "timeout"</code> in case of a timeout (in case of a timeout, the unfinished queueitems will remain in the worker queues, they will not be cancelled).

</div>






<div>

<h3>See also:</h3>
<ul>
	
	<li><a href="../../files/copas/eventer.html#event.waitfor">
		event.waitfor
	</a></li>
	
</ul>

</div>


</dd>




<dt><a name="event.queueitems"></a><strong>event.queueitems</strong>&nbsp;()</dt>
<dd>
Table/list with queueitems created. One for each event subscription dispatched. (this is a field, not a function)












</dd>




<dt><a name="event.waitfor"></a><strong>event.waitfor</strong>&nbsp;(self, timeout)</dt>
<dd>
Waits for an event to be completed. That is; all event queueitems have been completed by the workers, this does not include additional events spawned from them. Current thread/worker will yield while waiting (so cannot be used from the mainthread!).


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>self</em></code>: the event table
	</li>
	
	<li>
	  <code><em>timeout</em></code>: timeout (in seconds), use <code>nil</code> for no timeout
	</li>
	
</ul>





<div>


<h3 class="inline-block">Return value:</h3>
<code>true</code> when completed, or <code>nil, "timeout"</code> in case of a timeout.

</div>






<div>

<h3>See also:</h3>
<ul>
	
	<li><a href="../../files/copas/eventer.html#event.finish">
		event.finish
	</a></li>
	
</ul>

</div>


</dd>




<dt><a name="getclients"></a><strong>getclients</strong>&nbsp;(server)</dt>
<dd>
Gets a list of clients of a particular server.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>server</em></code>: the server for which to get the subscribed clients
	</li>
	
</ul>





<div>


<h3 class="inline-block">Return value:</h3>
<code>nil</code> if the server is unregistered, otherwise a table with subscriptions. The result table is keyed by 'event string' and each value is a list of clients that is subscribed to this event.

</div>



 
<div>

<h3 class="inline-block">Example:</h3>
<pre class="example">local list = copas.eventer.getclients(copas)     -- get list of Copas clients<br/>list = list[copas.events.loopstarted]            -- get clients of the 'loopstarted' event<br/>print ("the Copas 'loopstarted' event has " .. #list .. " clients subscribed.")</pre>

</div>




</dd>




<dt><a name="getsubscriptions"></a><strong>getsubscriptions</strong>&nbsp;(client)</dt>
<dd>
Gets a list of subscriptions of a particular client.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>client</em></code>: the client for which to get the subscriptions
	</li>
	
</ul>





<div>


<h3 class="inline-block">Return value:</h3>
<code>nil</code> if the client has no subscriptions, otherwise a table with subscriptions. The result table is keyed by 'server' and each value is a list of eventstrings the client is subscribed to on this server.

</div>







</dd>




<dt><a name="server.dispatch"></a><strong>server.dispatch</strong>&nbsp;(self, event, ...)</dt>
<dd>
Dispatches an event for this server. It functions as a shortcut to <code>serverdispatch()</code>.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>self</em></code>: the (decorated) server object
	</li>
	
	<li>
	  <code><em>event</em></code>: event string of the event to dispatch
	</li>
	
	<li>
	  <code><em>...</em></code>: any additional event parameters
	</li>
	
</ul>





<div>


<h3 class="inline-block">Return value:</h3>
event table

</div>



 
<div>

<h3 class="inline-block">Example:</h3>
<pre class="example">-- create an object and decorate it with event capabilities<br/>local obj1 = {}<br/>copas.eventer.decorate(obj1, { "start", "error", "stop" } )<br/>&nbsp<br/>..... do some stuff, subscribe to events, start the copas loop, etc.<br/>&nbsp<br/>-- raise the start event and include th starttime as an extra<br/>-- parameter to be passed to the eventhandlers<br/>local e = obj1:dispatch(obj1.events.start, socket.gettime())<br/>-- now wait for the event to be completely handled<br/>e:waitfor()</pre>

</div>



<div>

<h3>See also:</h3>
<ul>
	
	<li><a href="../../files/copas/eventer.html#server.events">
		server.events
	</a></li>
	
	<li><a href="../../files/copas/eventer.html#decorate">
		decorate
	</a></li>
	
	<li><a href="../../files/copas/eventer.html#serverdispatch">
		serverdispatch
	</a></li>
	
</ul>

</div>


</dd>




<dt><a name="server.events"></a><strong>server.events</strong>&nbsp;()</dt>
<dd>
Table (as a set) with the event strings for this server.








 
<div>

<h3 class="inline-block">Example:</h3>
<pre class="example">-- create an object and decorate it with event capabilities<br/>local obj1 = {}<br/>copas.eventer.decorate(obj1, { "start", "error", "stop" } )<br/>&nbsp<br/>print(obj1.events.start)   --> "start"<br/>print(obj1.events.error)   --> "error"<br/>print(obj1.events.stop)    --> "stop"</pre>

</div>



<div>

<h3>See also:</h3>
<ul>
	
	<li><a href="../../files/copas/eventer.html#decorate">
		decorate
	</a></li>
	
</ul>

</div>


</dd>




<dt><a name="server.subscribe"></a><strong>server.subscribe</strong>&nbsp;(self, client, handler, event)</dt>
<dd>
Subscribes a client to the events of this server. It functions as a shortcut to <code>clientsubscribe()</code>. See the example below for the format of the event data delivered to the event handler.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>self</em></code>: the (decorated) server object
	</li>
	
	<li>
	  <code><em>client</em></code>: the client identifier (usually the client object table)
	</li>
	
	<li>
	  <code><em>handler</em></code>: the handler function for the event
	</li>
	
	<li>
	  <code><em>event</em></code>: the event to subscribe to or <code>nil</code> to subscribe to all events
	</li>
	
</ul>







 
<div>

<h3 class="inline-block">Example:</h3>
<pre class="example">-- create an object and decorate it with event capabilities<br/>local obj1 = {}<br/>copas.eventer.decorate(obj1, { "start", "error", "stop" } )<br/>&nbsp<br/>-- create another object and subscribe to events of obj1<br/>local obj2 = {<br/>&nbsp;&nbsp;&nbsp;&nbsp;eventhandler = function(eventqueue)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while true do<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local event = eventqueue:pop()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local self = event.client<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- handle the retrieved data here<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(event.client)    -->  "table: 03AF0910"<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(event.server)    -->  "table: 06A30AD3"<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(event.name)      -->  "stop"<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(event.n)         -->  "2"<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(event[1])        -->  "arg1"<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(event[2])        -->  "arg2"<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br/>&nbsp;&nbsp;&nbsp;&nbsp;end,<br/>}<br/>obj1:subscribe(obj2, obj1.events.stop)<br/>&nbsp<br/>..... do some stuff, start the copas loop, etc.<br/>&nbsp<br/>-- raise the stop event<br/>local e = obj1:dispatch(obj1.events.stop, "arg1", "arg2")</pre>

</div>



<div>

<h3>See also:</h3>
<ul>
	
	<li><a href="../../files/copas/eventer.html#server.events">
		server.events
	</a></li>
	
	<li><a href="../../files/copas/eventer.html#decorate">
		decorate
	</a></li>
	
	<li><a href="../../files/copas/eventer.html#clientsubscribe">
		clientsubscribe
	</a></li>
	
</ul>

</div>


</dd>




<dt><a name="server.unsubscribe"></a><strong>server.unsubscribe</strong>&nbsp;(self, client, event)</dt>
<dd>
Unsubscribes a client from the events of this server. It functions as a shortcut to <code>clientunsubscribe()</code>.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>self</em></code>: the (decorated) server object
	</li>
	
	<li>
	  <code><em>client</em></code>: the client identifier (usually the client object table), must be the same as used while subscribing.
	</li>
	
	<li>
	  <code><em>event</em></code>: the event to unsubscribe from or <code>nil</code> to unsubscribe from all events
	</li>
	
</ul>










<div>

<h3>See also:</h3>
<ul>
	
	<li><a href="../../files/copas/eventer.html#server.events">
		server.events
	</a></li>
	
	<li><a href="../../files/copas/eventer.html#decorate">
		decorate
	</a></li>
	
	<li><a href="../../files/copas/eventer.html#clientunsubscribe">
		clientunsubscribe
	</a></li>
	
</ul>

</div>


</dd>




<dt><a name="serverdispatch"></a><strong>serverdispatch</strong>&nbsp;(server, event, ...)</dt>
<dd>
dispatches an event from a server. The prefered way is to use the <code>decorate()</code> function and then call <code>dispatch()</code>


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>server</em></code>: a unique key to identify the specific server
	</li>
	
	<li>
	  <code><em>event</em></code>: string
	</li>
	
	<li>
	  <code><em>...</em></code>: other arguments to be passed on as arguments to the eventhandler
	</li>
	
</ul>





<div>


<h3 class="inline-block">Return value:</h3>
event object, see the 'see' section below.

</div>






<div>

<h3>See also:</h3>
<ul>
	
	<li><a href="../../files/copas/eventer.html#event.event">
		event.event
	</a></li>
	
	<li><a href="../../files/copas/eventer.html#event.queueitems">
		event.queueitems
	</a></li>
	
	<li><a href="../../files/copas/eventer.html#event.cancel">
		event.cancel
	</a></li>
	
	<li><a href="../../files/copas/eventer.html#event.waitfor">
		event.waitfor
	</a></li>
	
	<li><a href="../../files/copas/eventer.html#event.finish">
		event.finish
	</a></li>
	
	<li><a href="../../files/copas/eventer.html#decorate">
		decorate
	</a></li>
	
	<li><a href="../../files/copas/eventer.html#server.dispatch">
		server.dispatch
	</a></li>
	
</ul>

</div>


</dd>




<dt><a name="serverregister"></a><strong>serverregister</strong>&nbsp;(server, eventlist)</dt>
<dd>
registers a server that will fire events. The prefered way is to use the <code>decorate()</code> function.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>server</em></code>: a unique key to identify the specific server, can be a string or table, or whatever, as long as it is unique
	</li>
	
	<li>
	  <code><em>eventlist</em></code>: list of strings with event names (table keys are unused, only values, so may also be a set)
	</li>
	
</ul>










<div>

<h3>See also:</h3>
<ul>
	
	<li><a href="../../files/copas/eventer.html#decorate">
		decorate
	</a></li>
	
</ul>

</div>


</dd>




<dt><a name="serverunregister"></a><strong>serverunregister</strong>&nbsp;(server)</dt>
<dd>
unregisters a server that will no longer fire events


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>server</em></code>: a unique key to identify the specific server, can be a string or table, or whatever, as long as it is unique
	</li>
	
</ul>











</dd>




<dt><a name="seterrorhandler"></a><strong>seterrorhandler</strong>&nbsp;(handler)</dt>
<dd>
Sets the error handler function to be used when calling eventhandlers.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>handler</em></code>: the error handler function (the errorhandler will be passed along to a <code>xpcall()</code> call)
	</li>
	
</ul>











</dd>


</dl>


</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
    <p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->
</body>
</html>
